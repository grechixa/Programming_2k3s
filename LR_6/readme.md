# Currency Exchange Rates Fetcher

## Описание проекта

Проект представляет собой функцию для получения курсов валют с API Центробанка РФ с поэтапным улучшением системы логирования и обработки ошибок.

## Структура проекта

```
├── exchange.py          # Базовая функция get_currencies
├── iter1.py            # Итерация 1 - Логирование в stdout
├── iter2.py            # Итерация 2 - Логирование через декоратор
├── iter3.py            # Итерация 3 - Логирование через модуль logging
├── test.py             # Тесты для проверки функциональности
└── logs/
    └── currency_errors.log  # Файл логов (создается автоматически)
```

## Постановка задачи

### Итерация 1
- Базовая реализация функции `get_currencies`
- Логирование ошибок в стандартный поток вывода (sys.stdout)
- Обработка исключений:
  - Отсутствие курсов валют в ответе API
  - Отсутствие конкретной валюты в данных
  - Ошибки запроса к API

### Итерация 2  
- Вынос логирования ошибок в декоратор
- Разделение ответственности между бизнес-логикой и обработкой ошибок

### Итерация 3
- Использование модуля `logging` для профессионального логирования
- Запись логов как в консоль, так и в файл

## Использование

### Базовая функция (exchange.py)
```python
from exchange import get_currencies

rates = get_currencies(['USD', 'EUR'])
print(rates)  # {'USD': 75.45, 'EUR': 85.12}
```

### Версия с логированием (iter1.py, iter2.py, iter3.py)
```python
from iter3 import get_currencies

# Получение курсов валют с логированием
rates = get_currencies(['USD', 'EUR', 'GBP'])
```

## Тестирование

Запуск тестов:
```bash
python test.py
```

Тесты проверяют:
- Корректность возвращаемых данных
- Обработку отсутствующих валют
- Обработку ошибок API
- Запись логов

## API

Используется официальное API Центробанка РФ:
- URL: `https://www.cbr-xml-daily.ru/daily_json.js`
- Формат данных: JSON

## Требования

- Python 3.6+
- requests>=2.25.0